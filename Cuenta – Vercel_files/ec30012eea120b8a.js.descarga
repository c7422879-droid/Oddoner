;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="162a535d-4f81-57e4-92a0-3352df8f6b8e")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4093282,e=>{e.v({continueWithText:"index-module__gQ5Ota__continueWithText",emptyResult:"index-module__gQ5Ota__emptyResult",entityName:"index-module__gQ5Ota__entityName",entityStack:"index-module__gQ5Ota__entityStack",gitPill:"index-module__gQ5Ota__gitPill",loadingResult:"index-module__gQ5Ota__loadingResult",providerBtn:"index-module__gQ5Ota__providerBtn",providerBtnMobile:"index-module__gQ5Ota__providerBtnMobile",repoDescription:"index-module__gQ5Ota__repoDescription",repoList:"index-module__gQ5Ota__repoList",repoTitle:"index-module__gQ5Ota__repoTitle",selectProvider:"index-module__gQ5Ota__selectProvider",small:"index-module__gQ5Ota__small",suggestionBox:"index-module__gQ5Ota__suggestionBox",suggestionDescription:"index-module__gQ5Ota__suggestionDescription",suggestionHighlight:"index-module__gQ5Ota__suggestionHighlight",suggestionList:"index-module__gQ5Ota__suggestionList",suggestionListBorder:"index-module__gQ5Ota__suggestionListBorder",turborepoBadgeContainer:"index-module__gQ5Ota__turborepoBadgeContainer",turborepoLogoContainer:"index-module__gQ5Ota__turborepoLogoContainer"})},7591419,2867523,e=>{"use strict";var t,i=e.i(7292788),r=e.i(8583659),s=e.i(9722978),a=e.i(6198010),o=e.i(9550268),n=e.i(6881349),l=e.i(5255926),c=e.i(9318197),d=e.i(57106),u=e.i(4004502),p=e.i(277234),h=e.i(4244280),m=e.i(5140444),g=e.i(5338940),x=e.i(4597921),f=e.i(4450569),j=e.i(8835183),b=e.i(5614970),y=e.i(1792778),v=e.i(1565534),_=e.i(7628870),S=e.i(7249340),w=e.i(8210056),N=e.i(5591369),A=e.i(4586231),T=e.i(2160483),C=e.i(4093282),I=e.i(2211858),G=e.i(5756088),E=e.i(8735244),k=e.i(3306538),R=e.i(7218483),L=e.i(5819220),P=e.i(979715),O=e.i(4712634),B=e.i(7045101),M=e.i(4147070),U=e.i(6509836);function D(e){let{framework:t}=e,r=(0,M.useFrameworkLogo)({logo:t.logo,darkModeLogo:t.darkModeLogo});return(0,i.jsx)(I.default,{alt:"Framework logo",height:20,src:r,width:20})}function H(e){let{repo:t,gitType:a,search:o,renderButton:n,repoSkeletonWidthPercentage:c=100,currentNamespace:d}=e,{data:p,error:h,isLoading:m}=(0,B.useDetectEligibleProjects)(t?.url),x=(0,R.useAgo)(t?.updatedAt),f=(0,r.useMemo)(()=>t?o?t.name.split(o).reduce((e,t,r)=>(0!==r&&e.push((0,i.jsx)("mark",{className:C.default.suggestionHighlight,children:o},e.length)),t&&e.push((0,i.jsx)("span",{children:t},e.length)),e),[]):[(0,i.jsx)("span",{children:t.name},t.id)]:null,[t,o]),j=!t||m,{team:b}=(0,g.useTeam)(),y=b?`${b.slug}/`:"",v=(0,r.useMemo)(()=>n(t,a,y,d,p?.projects[0],p?.projects.length,!b||b.billing?.plan==="hobby"),[t,a,y,p]);return(0,i.jsx)(L.Entity,{actions:(0,i.jsx)("div",{className:"flex flex-row items-stretch justify-start flex-initial",children:v}),"data-testid":(0,u.tid)("import-flow-layout","suggestion-card","suggestion"),placeholder:j,thumbnail:(0,i.jsx)(O.EntityThumbnail,{size:24,children:m?(0,i.jsx)(E.Spinner,{size:24}):(0,i.jsx)(U.FrameworkIconGroup,{error:h,gitType:a,projects:p?.projects})}),children:(0,i.jsx)(P.EntityField,{children:t?(0,i.jsxs)("div",{className:(0,s.clsx)("flex flex-row items-center justify-start gap-1 flex-initial",C.default.entityStack),children:[(0,i.jsx)("div",{className:(0,s.clsx)("flex flex-col items-stretch justify-start",C.default.entityName),style:{flex:"0 1 auto"},children:(0,i.jsx)("span",{className:(0,s.clsx)(C.default.repoTitle,"geist-ellipsis"),title:t.name,children:f})}),p?.monorepoManager?.slug==="turbo"?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:C.default.turborepoBadgeContainer,children:(0,i.jsx)(k.Badge,{variant:"turbo",children:"Turbo"})}),(0,i.jsx)("div",{className:C.default.turborepoLogoContainer,children:(0,i.jsx)(D,{framework:p.monorepoManager})})]}):null,t?.private?(0,i.jsx)("span",{title:"Private Git Repository",className:"flex flex-col items-stretch justify-start",style:{flex:"0 0 auto"},children:(0,i.jsx)(G.LockClosed,{color:"gray-700"})}):null,(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start geist-hide-on-mobile",style:{flex:"0 0 auto"},children:(0,i.jsx)("span",{className:C.default.repoDescription,children:"·"})}),(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start geist-hide-on-mobile",style:{flex:"0 0 auto"},children:(0,i.jsx)("span",{className:C.default.repoDescription,children:x})})]}):(0,i.jsx)(l.Skeleton,{height:20,width:`${c}%`})})})}var F=e.i(2504781),q=e.i(4030453),Q=e.i(3500331),z=e.i(6891161);async function $(e){let t=`/v1/integrations/github-does-ghes-app-exist?host=${e}`;return(await (0,p.fetchAPI)(t,{throwOnHTTPError:!0})).exists}var V=((t=V||{}).Default="Default",t.NeedsInstallation="NeedsInstallation",t);function W(e){let{teamSlug:t,webhookUrl:s,open:a,onClose:o,onSetHostname:n,flowKind:l}=e,c=(0,r.useRef)(null),[d,u]=(0,r.useState)(""),[p,h]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[x,f]=(0,r.useState)(""),[j,b]=(0,r.useState)("Default"),y={name:"Vercel",url:"https://vercel.com/github",redirect_url:(e=>{let{domain:t,organization:i,teamSlug:r,flowKind:s}=e;try{let e=new URL(t).host,a=new URL("https://vercel.com/api/v1/integrations/github-create-ghes-callback");return a.searchParams.set("host",e),a.searchParams.set("organization",i),a.searchParams.set("team",r),s&&a.searchParams.set("flowKind",s),a.toString()}catch{return""}})({domain:d,organization:p,teamSlug:t,flowKind:l}),callback_urls:["https://vercel.com/api/now/registration/github-custom-host/callback"],default_permissions:{actions:"write",administration:"write",checks:"write",contents:"write",deployments:"write",emails:"read",issues:"write",members:"read",metadata:"read",pull_requests:"write",repository_hooks:"write",statuses:"write"},hook_attributes:{active:!0,url:s},default_events:["branch_protection_rule","check_run","deployment","membership","pull_request","pull_request_review","push","repository","status","team"],public:!0},v=(0,r.useCallback)(()=>{u(""),h(""),b("Default"),o()},[o]),_=(0,r.useCallback)(async function(){let e;if(f(""),c.current?.reportValidity()){try{e=new URL(d).hostname}catch{f("The provided domain is not valid");return}g(!0);try{if(await $(e)){if("NeedsInstallation"===j)return void f("There is already a Spaces GitHub App installed for this GitHub Enterprise Server domain.");g(!1),n(e),v();return}if("NeedsInstallation"===j)return void c.current?.submit();b("NeedsInstallation"),g(!1)}catch{f("There was an unexpected error from the server.")}}},[d,j,v,n]);return(0,r.useEffect)(()=>{let e=e=>{a&&"Enter"===e.key&&(e.preventDefault(),_())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[_,a]),(0,i.jsx)(z.Modal.Modal,{active:a,onClickOutside:v,children:(0,i.jsxs)("form",{action:function(e,t){try{let i=new URL(e).origin;return`${i}/organizations/${t}/settings/apps/new`}catch{return""}}(d,p),method:"post",ref:c,children:[(0,i.jsxs)(z.Modal.Body,{children:[(0,i.jsxs)(z.Modal.Header,{children:[(0,i.jsx)(z.Modal.Title,{children:"GitHub Enterprise Server"}),(0,i.jsx)(z.Modal.Subtitle,{children:"Enter your GitHub Enterprise Server domain to connect a Git Repository from your GitHub Enterprise Server."})]}),(0,i.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,i.jsx)(Q.Input,{id:"domain",label:"GitHub Enterprise Server Domain",name:"domain",onChange:e=>u(e.target.value),placeholder:"https://github.acme.com",required:!0,value:d}),"NeedsInstallation"===j?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q.Input,{id:"organization",label:"GitHub Enterprise Server Organization Name",name:"organization",onChange:e=>h(e.target.value),placeholder:"organization-name",required:!0,value:p}),(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial geist-sr-only",children:(0,i.jsx)(Q.Input,{id:"manifest",label:"Manifest",name:"manifest",readOnly:!0,value:JSON.stringify(y)})})]}):null,(0,i.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:x?(0,i.jsx)(q.Error,{error:x}):null})]})]}),(0,i.jsxs)(z.Modal.Actions,{children:[(0,i.jsx)(z.Modal.Action,{onClick:v,type:"secondary",children:"Cancel"}),(0,i.jsx)(z.Modal.Action,{buttonType:"submit",loading:m,passthroughOnClick:e=>{e.preventDefault(),a&&_()},children:"Continue"})]})]})})}function K(e){let{teamSlug:t,webhookUrl:s,dispatch:a,flowKind:o}=e,[n,l]=(0,r.useState)(!1),{user:c}=(0,m.useUser)(),[d,u]=(0,r.useState)(""),{account:p,mutate:h,isLoading:g}=(0,A.default)({account:c??null,type:"github-custom-host",customHost:d}),[x,f]=(0,r.useState)(!1),j=(0,r.useCallback)(()=>{a({type:"SET_GIT_ACCOUNT",gitAccount:{provider:"github-custom-host",host:d}})},[a,d]),y=(0,S.useConnectPopup)({onOpen:()=>{l(!0)},onAbort:()=>{l(!1),u("")},onSuccess:()=>{j(),h(),l(!1)}}),v=(0,r.useCallback)(e=>{u(e),f(!1)},[]);return(0,r.useEffect)(()=>{if(p&&d&&!g){if(!p["github-custom-host"])return void h();p["github-custom-host"].verified?j():y.open("github-custom-host",{host:d})}},[p,g,d,y,h,j]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(F.Button,{loading:n,onClick:()=>f(!0),type:"tertiary",children:(0,i.jsxs)("span",{style:{display:"flex"},children:[(0,i.jsx)(b.default,{fill:"currentColor",gitType:"github",height:20,style:{marginRight:"var(--geist-gap-quarter)",transform:"translateY(-1px)"},width:20}),(0,i.jsx)("span",{className:"text-[14px] leading-[20px] font-medium text-inherit",children:"Continue with GitHub Enterprise"})]})}),(0,i.jsx)(W,{onClose:()=>f(!1),onSetHostname:v,open:x,teamSlug:t,webhookUrl:s,flowKind:o})]})}e.s(["GithubEnterpriseButton",0,K],2867523);var Y=e.i(7722264),J=e.i(4422059);function X(e){let{"data-testid":t,gitType:s,dispatch:a,shouldUpdatePreferredGitAccount:o,size:n,requireReauth:l,namespaceId:c}=e,[d,u]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),{user:g}=(0,m.useUser)(),{account:x,mutate:f}=(0,A.default)({account:g??null});(0,r.useEffect)(()=>{x&&p&&(h(!1),v())},[x]);let j=(0,r.useCallback)(async()=>{u(!0);let e=await (0,T.mutateGitNamespaces)(s);u(!1);let t=e?.find(e=>String(e.id)===String(c))??e?.[0];a({type:"SET_GIT_ACCOUNT",gitAccount:{provider:s,namespaceId:t?.id,requireReauth:t?.requireReauth}}),o&&eo({provider:s,namespaceId:t?.id})},[a,s,c,o]),b=(0,S.useConnectPopup)({onOpen:()=>{u(!0)},onAbort:()=>{u(!1)},onSuccess:()=>{j(),f(),u(!1)}}),v=(0,r.useCallback)(()=>{if(!x){h(!0),u(!0);return}!l&&x[s]?.verified?j():b.open(s)},[x,l,s,j,b]);return(0,i.jsxs)(y.default,{align:"grow","data-testid":t,gitType:s,loading:d,onClick:v,size:n,width:"100%",children:[(0,i.jsx)("span",{className:C.default.continueWithText,children:"Continue with "}),_.ORIGINS[s]]})}function Z(e){let{search:t,gitAccount:a,configureGithubInstallation:o}=e,n=a?.provider,{data:l}=(0,T.default)({provider:n}),d=(0,r.useMemo)(()=>a&&l?l.find(e=>e.id===a?.namespaceId)?.name:null,[l,a]);return(0,i.jsx)(f.default,{center:!0,className:(0,s.clsx)(C.default.selectProvider,C.default.emptyResult),children:(0,i.jsxs)(f.default,{flex:"0 0 auto",gap:0,children:[(0,i.jsxs)("p",{className:"text-copy-14 font-medium m-0 text-center","data-testid":(0,u.tid)("import-flow-layout","no-results-found-text"),children:["No ",t?"Results":"Git Repositories"," Found"]}),(0,i.jsx)(c.Spacer,{y:.25}),t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-copy-14 m-0 text-center",style:{color:"var(--accents-6)",wordBreak:"break-word"},children:(0,i.jsxs)(f.default,{center:!0,row:!0,children:["Your search ",t?`for "${t}"`:null," ",a&&d?(0,i.jsxs)(i.Fragment,{children:["in"," ",(0,i.jsxs)(f.default,{center:!0,flex:"0 0 auto",noWrap:!0,row:!0,children:[(0,i.jsx)(c.Spacer,{x:.2}),(0,i.jsx)(f.default,{flex:"0 0 auto",children:(0,i.jsx)(b.default,{gitType:a.provider})}),(0,i.jsx)(c.Spacer,{x:.2}),(0,i.jsx)("span",{className:"text-copy-16 font-medium geist-ellipsis",children:d}),(0,i.jsx)(c.Spacer,{x:.2})]})]}):null," ","did not return any results."]})}),(0,i.jsx)(c.Spacer,{y:.25})]}):null,o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-copy-14 m-0 text-center",style:{color:"var(--accents-6)"},children:"Make sure to grant Vercel access to the Git repositories you’d like to import."}),(0,i.jsx)(c.Spacer,{y:1}),(0,i.jsx)(y.default,{"data-testid":(0,u.tid)("import-flow-layout","configure-github-app-button"),gitType:"github",loading:!1,onClick:o,children:"Configure GitHub App"})]}):(0,i.jsx)("p",{className:"text-copy-14 m-0 text-center",style:{color:"var(--accents-6)"},children:"Try selecting a different Git account or organization on the top left."})]})})}function ee(e){let{gitAccount:t,dispatch:r}=e;return(0,i.jsx)(f.default,{center:!0,className:(0,s.clsx)(C.default.selectProvider,C.default.emptyResult),children:(0,i.jsxs)(f.default,{flex:"0 0 auto",gap:0,children:[(0,i.jsx)("p",{className:"text-copy-14 font-medium m-0 text-center","data-testid":(0,u.tid)("import-flow-layout","no-results-found-text"),children:"No Git Repositories Found"}),(0,i.jsx)(c.Spacer,{y:.25}),(0,i.jsxs)("p",{className:"text-copy-14 m-0 text-center","data-testid":(0,u.tid)("import-flow-layout","no-results-found-text"),style:{color:"var(--accents-6)"},children:["Your ",_.ORIGINS[t.provider]," account requires re-authentication to see your repositories."]}),(0,i.jsx)(c.Spacer,{y:1}),(0,i.jsx)(X,{dispatch:r,gitType:t.provider,namespaceId:t.namespaceId,requireReauth:!0})]})})}function et(e){let{openGithubInstallation:t}=e;return(0,i.jsx)(f.default,{center:!0,className:(0,s.clsx)(C.default.selectProvider,C.default.emptyResult),children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-start flex-initial",children:[(0,i.jsx)("p",{className:"text-copy-14 font-medium m-0 text-center","data-testid":(0,u.tid)("import-flow-layout","almost-done"),children:"Install the GitHub application for the accounts you wish to Import from to continue"}),(0,i.jsx)(c.Spacer,{y:1.3}),(0,i.jsx)("div",{className:"flex flex-col items-center justify-center gap-2 flex-1",children:(0,i.jsx)(y.default,{gitType:"github",onClick:t,children:"Install"})})]})})}function ei(e){let{renderButton:t}=e;return(0,i.jsx)(i.Fragment,{children:[84,30,75,68,32].map((e,r)=>(0,i.jsx)(H,{renderButton:t,repoSkeletonWidthPercentage:e},`${r}_${e}`))})}function er(e){let{repos:t,repoSearchIsLoading:p,search:h,debouncedSearch:m,gitAccount:x,dispatch:y,renderButton:v,shouldUpdatePreferredGitAccount:_,small:S,onChangeGitSelector:N,isInstallationNotFound:A}=e,I=x?.provider,G=x?.host,{isLoading:E,data:k,mutate:R}=(0,T.useIsomorphicGitNamspaces)({provider:I,host:G}),[L,P]=(0,r.useState)(!1),{team:O}=(0,g.useTeam)(),[B,M]=(0,r.useState)(!1);(0,r.useEffect)(()=>{L&&!p&&P(!1)},[L,p]);let U=(0,r.useCallback)(async e=>{let{installationId:t}=e,i=await R(),r=Array.isArray(i)&&i.length>0&&(i.find(e=>e.installationId===t)?.id||i[0].id)||null;y({type:"SET_GIT_NAMESPACE",namespaceId:r}),_&&eo({provider:"github",namespaceId:r}),P(!0),y({type:"REVALIDATE_REPOS"})},[y,R,_]),{open:D}=(0,w.default)({onSuccess:U,provider:"github-limited"===I?"github-limited":"github"}),F=(0,r.useMemo)(()=>{if(("github"===I||"github-limited"===I)&&k?.length){let e=k.find(e=>Number(e.id)===Number(x?.namespaceId));if(e?.isAccessRestricted)return D}},[I,D,k,x]),q=(0,r.useMemo)(()=>!E&&!!B&&(!x||"github"===x.provider&&(!x.namespaceId||!k?.length)),[x,k,E,B]),Q=(0,r.useMemo)(()=>{if(x?.requireReauth||A&&x&&!q)return{ui:(0,i.jsx)(ee,{dispatch:y,gitAccount:x}),suggestionListBorder:!1};if(q)return{ui:(0,i.jsx)(et,{openGithubInstallation:D}),suggestionListBorder:!1};if(!t||!k||L||!B)return{ui:(0,i.jsx)(ei,{renderButton:v}),suggestionListBorder:!1};if(0===t.length)return h!==m||m&&p?{ui:(0,i.jsx)(ei,{renderButton:v}),suggestionListBorder:!1}:null===h?{ui:(0,i.jsx)(Z,{configureGithubInstallation:F,gitAccount:x}),suggestionListBorder:!1}:{ui:(0,i.jsx)(Z,{configureGithubInstallation:F,gitAccount:x,search:m}),suggestionListBorder:!1};let e=!1;x?.provider==="github"||x?.provider==="github-limited"?e=t.length<5&&!!F:(x?.provider==="gitlab"||x?.provider==="bitbucket")&&(e=t.length<5);let r=k.find(e=>String(e.id)===String(x?.namespaceId));return{ui:(0,i.jsxs)(i.Fragment,{children:[t.slice(0,5).map(e=>(0,i.jsx)(H,{currentNamespace:r,gitType:x?.provider,renderButton:v,repo:e,search:m},e.id)),e?(0,i.jsxs)("p",{className:"text-copy-14",style:{color:"var(--accents-6)",textAlign:"left"},children:["Missing Git repository?"," ",x?.provider==="github"?(0,i.jsx)(d.Link,{href:"",onClick:F,variant:"highlight",children:"Adjust GitHub App Permissions →"}):(0,i.jsx)(d.Link,{external:!0,href:`/docs/git/vercel-for-${x?.provider}#missing-git-repository`,variant:"highlight",children:"Learn More"})]}):null]}),suggestionListBorder:t.length<5}},[y,h,m,t,k,B,L,q,x,D,F,v,A,p]),z=(0,r.useCallback)(e=>{if("select-different-git-provider"===e)y({type:"SET_GIT_ACCOUNT",gitAccount:null}),_&&eo({provider:null,namespaceId:null});else if("install-github"===e)D();else{let t=k?.find(t=>String(t.id)===String(e));y({type:"SET_GIT_NAMESPACE",namespaceId:t?.id??null,requireReauth:t?.requireReauth}),_&&eo({namespaceId:e})}N?.()},[y,k,D,_,N]),$=k&&[...k.map(e=>({"data-testid":(0,u.tid)("git-scope-combobox",`namespace-${e.provider}`),value:String(e.id),label:e.name||"",prefix:(0,i.jsx)(b.default,{gitType:e.provider}),isMenu:!1})),..."github"===I||"github-limited"===I?[{"data-testid":(0,u.tid)("import-flow-layout","git-scope-combobox","add-github-account"),value:"install-github",label:"Add GitHub Account",prefix:(0,i.jsx)(a.Plus,{size:14}),isMenu:!0}]:[],{"data-testid":(0,u.tid)("import-flow-layout","git-scope-combobox","switch-git-provider"),value:"select-different-git-provider",label:"Switch Git Provider",prefix:(0,i.jsx)(o.ListUnordered,{size:14}),isMenu:!0}],V=k?.find(e=>String(e.id)===String(x?.namespaceId)),W=V?.id||k?.[0]?.id||null;return(0,r.useEffect)(()=>{if(x&&Array.isArray(k)){if(!k.find(e=>String(e.id)===String(x.namespaceId))){let e=k[0],t=e?.id??null;(t||W)&&(x.namespaceId?z(t?String(t):null):y({type:"SET_GIT_NAMESPACE",namespaceId:t,requireReauth:e?.requireReauth}))}M(!0)}},[y,z,x,k,W]),(0,i.jsxs)(f.default,{className:(0,s.clsx)(C.default.suggestionList,{[C.default.suggestionListBorder]:!S&&Q.suggestionListBorder}),gap:!1,children:[(0,i.jsx)(f.default,{flex:"0 0 auto",children:(0,i.jsxs)(f.default,{className:C.default.suggestionDescription,direction:["column","row","row"],gap:!1,noWrap:!0,children:[(0,i.jsx)(f.default,{flex:"50%",children:(0,i.jsx)(l.Skeleton,{show:void 0===x||!B||!Array.isArray(k),children:(0,i.jsxs)(n.Combobox,{clearable:!1,"data-git-namespace-combobox":!0,"data-testid":(0,u.tid)("import-flow-layout","git-scope-combobox"),noRawSelectedValue:!0,onChange:z,placeholder:"Select a Git Namespace",value:W?String(W):null,children:[(0,i.jsx)(n.Combobox.Input,{"data-git-namespace-combobox-input":!0,"data-testid":(0,u.tid)("import-flow-layout","git-scope-combobox","input"),loading:"github"===I&&!B}),(0,i.jsx)(n.Combobox.List,{children:$?.map(e=>(0,i.jsx)(n.Combobox.Option,{"data-testid":e["data-testid"],isMenu:e.isMenu,prefix:e.prefix,value:e.value,children:e.label},e.value))})]})})}),(0,i.jsx)(c.Spacer,{x:1/3,y:1/3}),(0,i.jsx)(f.default,{flex:"50%",children:(0,i.jsx)(l.Skeleton,{show:!A&&!(V?.ownerType==="team"&&!O)&&(!!(!t&&null===h&&!q)||!B||!Array.isArray(k)||L),children:(0,i.jsx)(j.SearchInput,{"data-testid":(0,u.tid)("import-flow-layout","search-input"),disabled:t?.length===0&&null===h,onChange:e=>y({type:"SET_SEARCH",search:e.target.value}),placeholder:"Search…",value:h??"",width:"100%",loading:h!==m||!!(m&&p)})})})]})}),(0,i.jsx)(c.Spacer,{y:2/3}),(0,i.jsx)(f.default,{flex:"1 0 auto",children:(0,i.jsx)(f.default,{className:C.default.repoList,"data-testid":(0,u.tid)("import-flow-layout","repository-list"),gap:!1,children:Q.ui})})]})}function es(e){let{dispatch:t,small:a,shouldUpdatePreferredGitAccount:o}=e,{teamSlug:n}=(0,g.useTeam)(),l=(0,x.useServerFlag)("enable-github-onprem-project-creation-flow",!1),p=(0,x.useServerFlag)("enable-github-limited",!1)?["github","github-limited","gitlab","bitbucket"]:["github","gitlab","bitbucket"];return a?(0,i.jsxs)("div",{className:(0,s.clsx)(C.default.selectProvider,C.default.small),children:[p.map(e=>(0,i.jsxs)(r.default.Fragment,{children:[(0,i.jsx)("span",{className:C.default.providerBtn,children:(0,i.jsx)(X,{"data-testid":(0,u.tid)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:o})}),(0,i.jsx)("span",{className:(0,s.clsx)(C.default.providerBtn,C.default.providerBtnMobile),children:(0,i.jsx)(X,{"data-testid":(0,u.tid)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:o,size:"small"})}),(0,i.jsx)(c.Spacer,{x:.5,y:.25})]},e)),(0,i.jsx)(c.Spacer,{expand:!0,y:.5}),(0,i.jsx)("span",{className:"text-copy-16 font-medium",children:(0,i.jsx)(d.Link,{external:!0,href:"/account/authentication",variant:"highlight",children:"Manage Login Connections"})})]}):(0,i.jsx)(f.default,{center:!0,className:C.default.selectProvider,children:(0,i.jsxs)(f.default,{center:!0,flex:"0 0 auto",children:[(0,i.jsx)("p",{className:"text-copy-14 text-center",style:{color:"var(--accents-6)"},children:"Select a Git provider to import an existing project from a Git Repository."}),(0,i.jsx)(c.Spacer,{}),(0,i.jsxs)(f.default,{direction:"column",gap:1/3,style:{width:320},children:[n&&l?(0,i.jsx)(f.default,{children:(0,i.jsx)(K,{dispatch:t,teamSlug:n,webhookUrl:"https://api.vercel.com/v1/incoming/github",flowKind:"new-project"})}):null,p.map(e=>(0,i.jsx)(f.default,{children:(0,i.jsx)(X,{"data-testid":(0,u.tid)("select-git-repository","choose-provider",e),dispatch:t,gitType:e,shouldUpdatePreferredGitAccount:o})},e))]}),(0,i.jsx)(c.Spacer,{}),(0,i.jsx)("p",{className:"text-copy-14 font-medium text-center",children:(0,i.jsx)(d.Link,{external:!0,href:"/account/authentication",children:"Manage Login Connections"})})]})})}function ea(e,t){switch(t.type){case"INIT_GIT_ACCOUNT":return{...e,preferredGitAccount:t.preferredGitAccount};case"SET_SEARCH":return{...e,search:t.search};case"SET_DEBOUNCED_SEARCH":return{...e,debouncedSearch:t.debouncedSearch,ts:e.debouncedSearch!==e.search?Date.now():e.ts};case"SET_GIT_ACCOUNT":return{...e,search:null,localGitAccount:t.gitAccount};case"SET_GIT_NAMESPACE":{let i=e.localGitAccount??e.preferredGitAccount;return i?{...e,localGitAccount:{...i,namespaceId:t.namespaceId,requireReauth:t.requireReauth??!1}}:e}case"REVALIDATE_REPOS":return{...e,ts:Date.now()};default:return e}}let eo=async e=>{let{namespaceId:t,provider:i}=e;await (0,p.fetchAPI)(h.API_USER,{method:"PATCH",body:JSON.stringify({importFlowGitNamespaceId:t,importFlowGitProvider:i})})};e.s(["ConnectGitButton",0,X,"SelectGitRepository",0,function(e){let{renderButton:t,renderConnections:a,small:o,shouldUpdatePreferredGitAccount:n,onChangeGitSelector:l}=e,{user:c,isLoading:d}=(0,m.useUser)(),[{search:u,debouncedSearch:p,localGitAccount:h,preferredGitAccount:g},x]=(0,r.useReducer)(ea,{search:null,debouncedSearch:null,ts:Date.now()}),f=g||(c?.importFlowGitProvider&&c.importFlowGitNamespaceId?{provider:c.importFlowGitProvider,namespaceId:c.importFlowGitNamespaceId}:null),j=void 0!==h?h:f,{account:b,isLoading:y}=(0,A.default)({account:c,customHost:h?.provider==="github-custom-host"?h.host:void 0});(0,r.useEffect)(()=>{let e=setTimeout(()=>x({type:"SET_DEBOUNCED_SEARCH",debouncedSearch:u}),300);return()=>clearTimeout(e)},[u]);let _=(0,J.usePrevious)(p),{data:S,isLoading:w,error:T}=(0,N.useIsomorphicRepoSearch)({query:p,provider:j?.provider||void 0,host:j?.host,namespaceId:j?.namespaceId,requireReauth:j?.requireReauth},{keepPreviousData:_!==p}),I=(0,Y.isError)(T),G=I&&"code"in T&&"installation_not_found"===T.code;(0,r.useEffect)(()=>{(S||!w)&&n&&x({type:"INIT_GIT_ACCOUNT",preferredGitAccount:!S||"error"in S?null:S.gitAccount})},[S,h,n,w]);let E=(0,r.useMemo)(()=>{let e=n&&void 0===g,r=b?.github?.verified??!1,s=b?.gitlab?.verified??!1,h=b?.bitbucket?.verified??!1,m=b?.["github-custom-host"]?.verified??!1;return(!I||G)&&(e||y||d||(r||m||s||h)&&j)?(0,i.jsx)(er,{debouncedSearch:p,dispatch:x,gitAccount:j,isInstallationNotFound:G,onChangeGitSelector:l,renderButton:t,repoSearchIsLoading:w,repos:S&&"repos"in S?S.repos:void 0,search:u,shouldUpdatePreferredGitAccount:n,small:o}):c?.limited?(0,i.jsx)(v.default,{small:o}):a?a({dispatch:x}):(0,i.jsx)(es,{dispatch:x,shouldUpdatePreferredGitAccount:!0,small:o})},[g,n,b,y,c?.limited,a,o,p,l,t,w,S,u,d,j,I,G]);return(0,i.jsx)("div",{className:(0,s.clsx)(C.default.suggestionBox,{[C.default.small]:o}),children:E})},"reducer",0,ea,"updatePreferredGitAccount",0,eo],7591419)}]);

//# debugId=162a535d-4f81-57e4-92a0-3352df8f6b8e
//# sourceMappingURL=e4be99f809a6a782.js.map