;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d5839ac2-9e60-e34f-b927-d8382bdf5176")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3917477,e=>{"use strict";var t=e.i(7909933),s=e.i(277234),a=e.i(4244280),i=e.i(1717203),r=e.i(7557283);e.s(["usePasskeys",0,function(e){let{can:o,isLoading:l}=(0,i.default)(),n=o(r.Action.Read,r.Resource.WebAuthn),d=!l&&n;return(0,t.default)(()=>d?`${a.API_REGISTRATION}/webauthn/passkeys`:null,e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0}),e)}])},318173,(e,t,s)=>{t.exports=function(e,t,s){if("function"!=typeof e)throw TypeError("Expected a function");return setTimeout(function(){e.apply(void 0,s)},t)}},548427,(e,t,s)=>{var a=e.r(318173),i=e.r(686521),r=e.r(7394370);t.exports=i(function(e,t,s){return a(e,r(t)||0,s)})},2216086,e=>{e.v({illustration:"passkey-modal-module__9ZYmQW__illustration",illustrationIcon:"passkey-modal-module__9ZYmQW__illustrationIcon",learnMoreLink:"passkey-modal-module__9ZYmQW__learnMoreLink",modalBody:"passkey-modal-module__9ZYmQW__modalBody",modalHeader:"passkey-modal-module__9ZYmQW__modalHeader",passkeyNameInput:"passkey-modal-module__9ZYmQW__passkeyNameInput",subtitle:"passkey-modal-module__9ZYmQW__subtitle"})},8790775,2551420,e=>{"use strict";var t=e.i(7292788),s=e.i(8583659),a=e.i(3500331),i=e.i(6891161),r=e.i(9318197),o=e.i(455575),l=e.i(57106),n=e.i(9450258),d=e.i(548427),c=e.i(4244280),u=e.i(4004502),h=e.i(277234),x=e.i(5140444),p=e.i(3917477),f=e.i(6046560);function y(e){let{active:a,onSuccess:r,onCancel:l}=e,d=(0,o.useToasts)(),{data:y}=(0,p.usePasskeys)(),{user:m}=(0,x.useUser)(),[g,C]=(0,s.useState)(!1),v=!!m?.mfa?.hasTotp,w=!!y?.passkeys&&y.passkeys.length>0,_=(0,s.useMemo)(()=>[v?"totp":null,w?"webauthn":null,"recovery-code"].filter(j),[v,w]),k=async e=>{let{type:t,code:s}=e;if("totp"===t||"recovery-code"===t)try{let e=await (0,h.fetchAPI)(c.API_USER_MFA_CHALLENGE,{method:"POST",headers:{"Content-Type":"application/json"},body:{type:t,code:s},throwOnHTTPError:!0});await r(e)}catch{C(!0)}if("webauthn"===t)try{let e=await (0,h.fetchAPI)("/api/auth/webauthn/options",{throwOnHTTPError:!0});if(!("challenge"in e)){C(!0),d.error("Webauthn challenge failed.");return}let t=await (0,n.startAuthentication)(e),s=await (0,h.fetchAPI)("/api/auth/webauthn/mfa-challenge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),throwOnHTTPError:!0});await r(s)}catch{C(!0),d.error("Challenge failed.")}},b="Choose from your authenticator app, passkey, or recovery code to continue.";return _.includes("totp")?_.includes("webauthn")||(b="Enter the code from your authenticator app or use a recovery code to continue."):b="Use your passkey or enter a recovery code to continue.",(0,t.jsx)(i.Modal.Modal,{active:a,"data-testid":(0,u.tid)("account","two-factor","challenge-modal"),onClickOutside:l,children:(0,t.jsxs)(i.Modal.Body,{children:[(0,t.jsxs)(i.Modal.Header,{children:[(0,t.jsx)(i.Modal.Title,{children:"Reauthenticate"}),(0,t.jsx)(i.Modal.Subtitle,{children:b})]}),(0,t.jsx)(f.TwoFactorChallenge,{availableMethods:_,isValidationError:g,onRecoveryCodeSubmit:async e=>{await k({type:"recovery-code",code:e})},onTotpSubmit:async e=>{await k({type:"totp",code:e})},onWebauthnSubmit:async()=>{await k({type:"webauthn",code:null})},withTotpSlots:!0})]})})}function j(e){return null!=e}e.s(["TwoFactorChallengeModal",0,y],2551420);var m=e.i(2216086),g=e.i(1867722);let C=s.createContext({});function v(e){let a={initial:{pathLength:0},animate:{pathLength:1,transition:{duration:0}}},i={initial:{opacity:0},animate:{opacity:1,transition:{delay:0,duration:.5}}},{shouldAnimate:r,...o}=e,l=(0,s.useMemo)(()=>({shouldAnimate:r}),[r]);return(0,t.jsx)(C.Provider,{value:l,children:(0,t.jsxs)("svg",{fill:"none",height:"264",role:"img",viewBox:"0 0 891 264",width:"891",...o,children:[(0,t.jsxs)("g",{children:[(0,t.jsx)(g.m.path,{d:"M415 57L5.00002 57C2.79088 57 1.00001 131.791 1.00001 134L1.00001 264",stroke:"var(--geist-foreground)",strokeOpacity:"0.1",...a,transition:{delay:0}}),(0,t.jsx)("path",{d:"M415 57L5.00002 57C2.79088 57 1.00001 131.791 1.00001 134L1.00001 264",stroke:"url(#blue-pulse-1)",strokeLinecap:"round",strokeWidth:"2"})]}),(0,t.jsx)(g.m.path,{d:"M415 82L73 82C70.7909 82 69 151.791 69 154L69 174",stroke:"var(--geist-foreground)",strokeOpacity:"0.1",...a,transition:{delay:0}}),(0,t.jsxs)("g",{children:[(0,t.jsx)(g.m.path,{d:"M481 57L822 57C824.209 57 826 131.791 826 134L826 264",stroke:"var(--geist-foreground)",strokeOpacity:"0.1",...a,transition:{delay:0}}),(0,t.jsx)("path",{d:"M481 57L822 57C824.209 57 826 131.791 826 134L826 264",stroke:"url(#blue-pulse-3)",strokeWidth:"2"})]}),(0,t.jsxs)("g",{children:[(0,t.jsx)(g.m.path,{d:"M481 82L633 82C635.209 82 637 83.791 637 85L637 200",stroke:"var(--geist-foreground)",strokeOpacity:"0.1",...a,transition:{delay:0}}),(0,t.jsx)("path",{d:"M481 82L633 82C635.209 82 637 83.791 637 85L637 200",stroke:"url(#blue-pulse-4)",strokeLinecap:"round",strokeWidth:"2"})]}),(0,t.jsxs)("g",{children:[(0,t.jsx)(g.m.path,{d:"M438 102L438 141C438 143.146 436.146 145 434 145L330 145",stroke:"var(--geist-foreground)",strokeOpacity:"0.1",...a,transition:{delay:0}}),(0,t.jsx)("path",{d:"M438 102L438 141C438 143.146 436.146 145 434 145L330 145",stroke:"url(#blue-pulse-2)",strokeLinecap:"round",strokeWidth:"2"})]}),(0,t.jsx)(g.m.path,{d:"M460 165L460 102",stroke:"var(--geist-foreground)",strokeOpacity:"0.1",...a,animate:{...a.animate,scale:-1},transition:{delay:0}}),(0,t.jsx)(g.m.path,{d:"M436 36L436 0",stroke:"url(#paint1_linear_341_27683)",strokeOpacity:"0.1",...a,transition:{delay:0}}),(0,t.jsx)(g.m.path,{d:"M460 36L460 20C460 16.7909 461.791 15 464 15L554 15",stroke:"var(--geist-foreground)",strokeOpacity:"0.1",...a,transition:{delay:0}}),(0,t.jsx)(g.m.circle,{...i,cx:"558",cy:"15",r:"3.5",stroke:"var(--geist-foreground)",strokeOpacity:"0.1"}),(0,t.jsx)(g.m.circle,{...i,cx:"326",cy:"145",r:"3.5",stroke:"var(--geist-foreground)",strokeOpacity:"0.1"}),(0,t.jsx)(g.m.circle,{...i,cx:"460",cy:"169",r:"3.5",stroke:"var(--geist-foreground)",strokeOpacity:"0.1"}),(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"paint0_linear_341_27683",x1:"412.5",x2:"412.5",y1:"-3.27835e-08",y2:"96",children:[(0,t.jsx)("stop",{stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"1"})]}),(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"paint1_linear_341_27683",x1:"436.5",x2:"436.5",y1:"-3.27835e-08",y2:"30",children:[(0,t.jsx)("stop",{stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"1"})]}),(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"paint2_linear_341_27683",x1:"554",x2:"484",y1:"20",y2:"96",children:[(0,t.jsx)("stop",{stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"1"})]}),(0,t.jsxs)(w,{animate:{x1:[183,600],x2:[83,350],y1:[320,83],y2:[615,133.75]},id:"blue-pulse-1",transition:{duration:2.2,repeat:1/0,repeatDelay:1.4,delay:0},children:[(0,t.jsx)("stop",{stopColor:"#0060D1",stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"0.05",stopColor:"#0060D1"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#0060D1",stopOpacity:"0"})]}),(0,t.jsxs)(w,{animate:{x1:[83,400],x2:[83,350],y1:[150,20],y2:[200,90]},id:"blue-pulse-2",transition:{duration:1.5,repeat:1/0,repeatDelay:1.2},children:[(0,t.jsx)("stop",{stopColor:"#0060D1",stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"0.05",stopColor:"#0060D1"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#0060D1",stopOpacity:"0"})]}),(0,t.jsxs)(w,{animate:{x1:[490,490,480,478,475],x2:[490,479,488],y1:[200,80],y2:[220,100]},id:"blue-pulse-4",transition:{duration:2.2,repeat:1/0,repeatDelay:1.8,delay:0},children:[(0,t.jsx)("stop",{stopColor:"#0060D1",stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"0.0564843",stopColor:"#0060D1"}),(0,t.jsx)("stop",{offset:"0.4616",stopColor:"#0060D1"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#0060D1",stopOpacity:"0"})]}),(0,t.jsxs)(w,{animate:{x1:[826,360],x2:[826,400],y1:[270,130],y2:[340,170]},id:"blue-pulse-3",transition:{duration:2,repeat:1/0,repeatDelay:1.8,delay:0},children:[(0,t.jsx)("stop",{stopColor:"#0060D1",stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"0.0550784",stopColor:"#0060D1"}),(0,t.jsx)("stop",{offset:"0.373284",stopColor:"#0060D1"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#0060D1",stopOpacity:"0"})]})]})]})})}function w(e){let{children:a,animate:i,transition:r,...o}=e,{shouldAnimate:l}=s.useContext(C),n={x1:i.x1[0],y1:i.y1[0],x2:i.x2[0],y2:i.y2[0]},d=l?i:n,c=r?.delay?r.delay+0:0;return(0,t.jsx)(g.m.linearGradient,{animate:d,initial:n,gradientUnits:"userSpaceOnUse",transition:{...r,delay:c},id:o.id,children:a})}function _(){return(0,t.jsxs)("svg",{fill:"none",height:"74",viewBox:"0 0 70 74",width:"70",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsxs)("g",{filter:"url(#filter0_dd_6520_4744)",children:[(0,t.jsx)("rect",{fill:"var(--ds-background-100)",height:"65",rx:"8.5",width:"65",x:"2.5",y:"0.5"}),(0,t.jsx)("rect",{height:"65",rx:"8.5",stroke:"var(--ds-gray-300)",width:"65",x:"2.5",y:"0.5"}),(0,t.jsx)("path",{d:"M7 9C7 6.79086 8.79086 5 11 5H59C61.2091 5 63 6.79086 63 9V57C63 59.2091 61.2091 61 59 61H11C8.79086 61 7 59.2091 7 57V9Z",fill:"var(--ds-gray-100)"}),(0,t.jsx)("path",{d:"M8 9C8 7.34315 9.34315 6 11 6H59C60.6569 6 62 7.34315 62 9V57C62 58.6569 60.6569 60 59 60H11C9.34315 60 8 58.6569 8 57V9Z",fill:"var(--ds-background-200)"}),(0,t.jsx)("g",{clipPath:"url(#clip0_6520_4744)",children:(0,t.jsxs)("g",{filter:"url(#filter1_i_6520_4744)",children:[(0,t.jsx)("path",{d:"M33.1446 31.4211C36.0223 31.4211 38.3551 29.0882 38.3551 26.2105C38.3551 23.3328 36.0223 21 33.1446 21C30.2669 21 27.9341 23.3328 27.9341 26.2105C27.9341 29.0882 30.2669 31.4211 33.1446 31.4211Z",fill:"var(--ds-gray-900)"}),(0,t.jsx)("path",{d:"M47.0393 31.421C47.0419 30.6952 46.8494 29.982 46.4821 29.3559C46.1148 28.7299 45.586 28.214 44.9512 27.8621C44.3163 27.5103 43.5986 27.3354 42.873 27.3558C42.1474 27.3762 41.4406 27.591 40.8265 27.9779C40.2124 28.3648 39.7134 28.9096 39.3818 29.5552C39.0502 30.2009 38.898 30.9238 38.9413 31.6484C38.9845 32.3729 39.2216 33.0726 39.6277 33.6742C40.0338 34.2758 40.594 34.7573 41.2498 35.0684V41.2631L42.9867 43L45.8814 40.1052L44.1446 38.3684L45.8814 36.6315L44.4456 35.1958C45.2082 34.9015 45.864 34.3836 46.3268 33.7099C46.7897 33.0363 47.0381 32.2384 47.0393 31.421ZM42.9867 31.421C42.7577 31.421 42.5338 31.3531 42.3434 31.2259C42.153 31.0987 42.0046 30.9178 41.9169 30.7062C41.8293 30.4947 41.8064 30.2618 41.851 30.0372C41.8957 29.8126 42.006 29.6063 42.1679 29.4444C42.3299 29.2824 42.5362 29.1722 42.7608 29.1275C42.9854 29.0828 43.2182 29.1057 43.4298 29.1934C43.6414 29.281 43.8222 29.4294 43.9494 29.6198C44.0767 29.8103 44.1446 30.0341 44.1446 30.2631C44.1446 30.5702 44.0226 30.8647 43.8054 31.0819C43.5883 31.299 43.2938 31.421 42.9867 31.421Z",fill:"var(--ds-gray-900)"}),(0,t.jsx)("path",{d:"M37.7068 33.76C36.8176 33.3636 35.855 33.1584 34.8815 33.1579H31.4078C29.5653 33.1579 27.7982 33.8899 26.4953 35.1927C25.1924 36.4956 24.4604 38.2627 24.4604 40.1053V42.4211H39.5131V36.0411C38.7322 35.4412 38.1117 34.6576 37.7068 33.76Z",fill:"var(--ds-gray-900)"})]})})]}),(0,t.jsxs)("defs",{children:[(0,t.jsxs)("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"74",id:"filter0_dd_6520_4744",width:"70",x:"0",y:"0",children:[(0,t.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,t.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,t.jsx)("feMorphology",{in:"SourceAlpha",operator:"erode",radius:"8",result:"effect1_dropShadow_6520_4744"}),(0,t.jsx)("feOffset",{dy:"8"}),(0,t.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,t.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,t.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),(0,t.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_6520_4744"}),(0,t.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,t.jsx)("feOffset",{dy:"2"}),(0,t.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,t.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),(0,t.jsx)("feBlend",{in2:"effect1_dropShadow_6520_4744",mode:"normal",result:"effect2_dropShadow_6520_4744"}),(0,t.jsx)("feBlend",{in:"SourceGraphic",in2:"effect2_dropShadow_6520_4744",mode:"normal",result:"shape"})]}),(0,t.jsxs)("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"22",id:"filter1_i_6520_4744",width:"22.5789",x:"24.4604",y:"21",children:[(0,t.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,t.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,t.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,t.jsx)("feOffset",{dy:"0.5"}),(0,t.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,t.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.16 0"}),(0,t.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_6520_4744"})]}),(0,t.jsx)("clipPath",{id:"clip0_6520_4744",children:(0,t.jsx)("rect",{fill:"var(--geist-background)",height:"24",transform:"translate(23 21)",width:"24"})})]})]})}function k(){return(0,t.jsxs)("svg",{fill:"none",height:"74",viewBox:"0 0 70 74",width:"70",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsxs)("g",{filter:"url(#filter0_dd_6520_4923)",children:[(0,t.jsxs)("g",{clipPath:"url(#clip0_6520_4923)",children:[(0,t.jsx)("rect",{fill:"var(--geist-background)",height:"64",rx:"8",width:"64",x:"3",y:"1"}),(0,t.jsx)("path",{d:"M7 9C7 6.79086 8.79086 5 11 5H59C61.2091 5 63 6.79086 63 9V57C63 59.2091 61.2091 61 59 61H11C8.79086 61 7 59.2091 7 57V9Z",fill:"var(--ds-gray-100)"}),(0,t.jsx)("path",{d:"M8 9C8 7.34315 9.34315 6 11 6H59C60.6569 6 62 7.34315 62 9V57C62 58.6569 60.6569 60 59 60H11C9.34315 60 8 58.6569 8 57V9Z",fill:"var(--ds-background-200)"}),(0,t.jsx)("g",{filter:"url(#filter1_di_6520_4923)",children:(0,t.jsx)("path",{clipRule:"evenodd",d:"M23 33C23 26.3726 28.3726 21 35 21C41.6274 21 47 26.3726 47 33C47 39.6274 41.6274 45 35 45C28.3726 45 23 39.6274 23 33ZM40.3357 30.1071C40.7263 29.7166 40.7263 29.0834 40.3357 28.6929C39.9452 28.3024 39.312 28.3024 38.9215 28.6929L33.2 34.4144L30.9071 32.1215C30.5166 31.7309 29.8834 31.7309 29.4929 32.1215C29.1024 32.512 29.1024 33.1451 29.4929 33.5357L32.4929 36.5358C32.6804 36.7233 32.9348 36.8287 33.2 36.8287C33.4652 36.8287 33.7196 36.7233 33.9071 36.5358L40.3357 30.1071Z",fill:"var(--ds-gray-900)",fillRule:"evenodd"})}),(0,t.jsx)("path",{d:"M3 7C3 3.68629 5.68629 1 9 1H61C64.3137 1 67 3.68629 67 7V59C67 62.3137 64.3137 65 61 65H9C5.68629 65 3 62.3137 3 59V7Z",fill:"url(#paint0_linear_6520_4923)",fillOpacity:"0.4"})]}),(0,t.jsx)("rect",{height:"65",rx:"8.5",stroke:"var(--geist-foreground)",strokeOpacity:"0.08",width:"65",x:"2.5",y:"0.5"})]}),(0,t.jsxs)("defs",{children:[(0,t.jsxs)("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"74",id:"filter0_dd_6520_4923",width:"70",x:"0",y:"0",children:[(0,t.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,t.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,t.jsx)("feMorphology",{in:"SourceAlpha",operator:"erode",radius:"8",result:"effect1_dropShadow_6520_4923"}),(0,t.jsx)("feOffset",{dy:"8"}),(0,t.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,t.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,t.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),(0,t.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_6520_4923"}),(0,t.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,t.jsx)("feOffset",{dy:"2"}),(0,t.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,t.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),(0,t.jsx)("feBlend",{in2:"effect1_dropShadow_6520_4923",mode:"normal",result:"effect2_dropShadow_6520_4923"}),(0,t.jsx)("feBlend",{in:"SourceGraphic",in2:"effect2_dropShadow_6520_4923",mode:"normal",result:"shape"})]}),(0,t.jsxs)("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"24.5",id:"filter1_di_6520_4923",width:"24",x:"23",y:"21",children:[(0,t.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,t.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,t.jsx)("feOffset",{dy:"0.5"}),(0,t.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,t.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"}),(0,t.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_6520_4923"}),(0,t.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6520_4923",mode:"normal",result:"shape"}),(0,t.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,t.jsx)("feOffset",{dy:"1"}),(0,t.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,t.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),(0,t.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect2_innerShadow_6520_4923"})]}),(0,t.jsxs)(g.m.linearGradient,{animate:{x1:[183,600],x2:[83,350],y1:[320,83],y2:[615,133.75]},gradientUnits:"userSpaceOnUse",id:"paint0_linear_6520_4926",transition:{duration:2,repeat:1,delay:0},x1:"1",x2:"65",y1:"33",y2:"33",children:[(0,t.jsx)("stop",{offset:"0.270833",stopColor:"var(--geist-background)",stopOpacity:"0"}),(0,t.jsx)("stop",{offset:"0.541667",stopColor:"var(--geist-background)"}),(0,t.jsx)("stop",{offset:"0.817708",stopColor:"var(--geist-background)",stopOpacity:"0"})]}),(0,t.jsx)("clipPath",{id:"clip0_6520_4923",children:(0,t.jsx)("rect",{fill:"var(--geist-background)",height:"64",rx:"8",width:"64",x:"3",y:"1"})})]})]})}function b(){return(0,t.jsxs)("svg",{fill:"none",height:"74",viewBox:"0 0 70 74",width:"70",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsxs)("g",{filter:"url(#filter0_dd_6520_4863)",children:[(0,t.jsx)("rect",{fill:"var(--geist-background)",height:"64",rx:"8",width:"64",x:"3",y:"1"}),(0,t.jsx)("rect",{height:"65",rx:"8.5",stroke:"var(--geist-foreground)",strokeOpacity:"0.08",width:"65",x:"2.5",y:"0.5"}),(0,t.jsx)("path",{d:"M7 9C7 6.79086 8.79086 5 11 5H59C61.2091 5 63 6.79086 63 9V57C63 59.2091 61.2091 61 59 61H11C8.79086 61 7 59.2091 7 57V9Z",fill:"var(--ds-gray-100)"}),(0,t.jsx)("path",{d:"M8 9C8 7.34315 9.34315 6 11 6H59C60.6569 6 62 7.34315 62 9V57C62 58.6569 60.6569 60 59 60H11C9.34315 60 8 58.6569 8 57V9Z",fill:"var(--ds-background-200)"}),(0,t.jsx)("g",{filter:"url(#filter1_di_6520_4863)",children:(0,t.jsx)("path",{clipRule:"evenodd",d:"M29.9413 21.3081C30.1299 21.1113 30.3907 21 30.6633 21H39.3367C39.6093 21 39.8701 21.1113 40.0587 21.3081L46.222 27.7393C46.4004 27.9255 46.5 28.1734 46.5 28.4312V37.5688C46.5 37.8266 46.4004 38.0745 46.222 38.2607L40.0587 44.6919C39.8701 44.8887 39.6093 45 39.3367 45H30.6633C30.3907 45 30.1299 44.8887 29.9413 44.6919L23.778 38.2607C23.5996 38.0745 23.5 37.8266 23.5 37.5688V28.4312C23.5 28.1734 23.5996 27.9255 23.778 27.7393L29.9413 21.3081ZM36 26.75V27.75V33L36 34H34L34 33V27.75V26.75H36ZM35 39C35.7939 39 36.4375 38.3284 36.4375 37.5C36.4375 36.6716 35.7939 36 35 36C34.2061 36 33.5625 36.6716 33.5625 37.5C33.5625 38.3284 34.2061 39 35 39Z",fill:"var(--ds-gray-900)",fillRule:"evenodd"})})]}),(0,t.jsx)("defs",{children:(0,t.jsxs)("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"74",id:"filter0_dd_6520_4863",width:"70",x:"0",y:"0",children:[(0,t.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,t.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,t.jsx)("feMorphology",{in:"SourceAlpha",operator:"erode",radius:"8",result:"effect1_dropShadow_6520_4863"}),(0,t.jsx)("feOffset",{dy:"8"}),(0,t.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,t.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,t.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),(0,t.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_6520_4863"}),(0,t.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,t.jsx)("feOffset",{dy:"2"}),(0,t.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,t.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.04 0"}),(0,t.jsx)("feBlend",{in2:"effect1_dropShadow_6520_4863",mode:"normal",result:"effect2_dropShadow_6520_4863"}),(0,t.jsx)("feBlend",{in:"SourceGraphic",in2:"effect2_dropShadow_6520_4863",mode:"normal",result:"shape"})]})})]})}C.displayName="AnimatedLinesContext";var A=e.i(9722978);e.s(["PasskeyModal",0,function(e){let{active:u,onCreate:h,onUpdate:x,onCancel:p}=e,[f,j]=(0,s.useState)(!1),[g,C]=(0,s.useState)(!1),[w,M]=(0,s.useState)(!1),[S,T]=(0,s.useState)(null),[N,O]=(0,s.useState)(""),[P,I]=(0,s.useState)(""),R=(0,o.useToasts)(),L=(0,s.useRef)(null),[E,B]=(0,s.useState)(!1),[F,U]=(0,s.useState)(null),D=async()=>{j(!0);let e=await fetch(`${c.API_REGISTRATION}/webauthn/passkeys/${P}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:N})}),t=await e.json();if("credentialId"in t)R.success("Passkey name saved."),await x();else if("error"in t)if("challenge_required"===t.error.code){B(!0),U("passkey-name");return}else"validation_error"===t.error.code&&R.error(t.error.message);j(!1)},H=async()=>{let e;j(!0),T(null),C(!1),M(!1);let t=await fetch(c.API_USER_MFA_CHALLENGE),s=await t.json();if("sudo"in s&&!s.sudo){B(!0),U("passkey-register");return}let a=await fetch(`${c.API_REGISTRATION}/webauthn/options`),i=await a.json();if("error"in i){console.error(i),T(i.error.message||"Passkey registration failed. Please try again."),j(!1);return}try{e=await (0,n.startRegistration)(i)}catch(e){console.error(e),T("ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED"===e.code?"You already registered this device. You don't have to register it again.":"Passkey registration took too long or was cancelled. Please try again."),j(!1);return}let r=await fetch(`${c.API_REGISTRATION}/webauthn/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await r.json();"error"in o?"challenge_required"===o.error.code?(B(!0),U("passkey-name")):(T("Passkey registration could not be verified. Please try again."),j(!1)):o.verified?(M(!0),I(o.credentialId),O(o.passkeyName),(0,d.default)(()=>{C(!0),j(!1),(0,d.default)(()=>{L.current?.focus()},100)},1e3),h(),R.success("Passkey created.")):(C(!1),T("Passkey registration could not be verified. Please try again."),j(!1))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Modal.Modal,{active:!!(u&&!E),disableFocusTrap:!0,onAnimationDone:()=>{j(!1),T(null),C(!1),M(!1),O(""),I("")},onClickOutside:()=>p(),width:480,children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),D()},children:[(0,t.jsxs)(i.Modal.Body,{className:m.default.modalBody,padding:0,children:[(0,t.jsxs)("div",{className:(0,A.default)("flex flex-col items-stretch justify-start flex-initial",m.default.modalHeader),children:[(0,t.jsx)(i.Modal.Title,{center:!0,children:"Create Passkey"}),(0,t.jsx)(r.Spacer,{}),(0,t.jsxs)("p",{className:`text-copy-14 text-center ${m.default.subtitle}`,children:[g?(0,t.jsx)(t.Fragment,{children:"Passkey has been successfully created. Optionally set a custom name for your device."}):S||(0,t.jsx)(t.Fragment,{children:"Passkeys are a simple and secure way to authenticate using biometrics, a hardware key, or PIN."}),f||g?null:(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsx)(l.Link,{external:!0,href:"/docs/accounts/create-an-account#login-with-passkeys",style:{textDecoration:"none"},type:"highlight",children:"Learn More"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsxs)("div",{className:(0,A.default)("flex flex-col items-center justify-center flex-initial",m.default.illustration),style:{filter:`blur(${3*!!g}px)`},children:[(0,t.jsx)(v,{"data-lines":!0,shouldAnimate:f},String(g||S)),(0,t.jsx)("div",{className:(0,A.default)("flex flex-col items-stretch justify-start flex-initial",m.default.illustrationIcon),children:w?(0,t.jsx)(k,{}):S?(0,t.jsx)(b,{}):(0,t.jsx)(_,{})})]}),g?(0,t.jsxs)("div",{className:(0,A.default)("flex flex-col items-center justify-start flex-initial",m.default.passkeyNameInput),children:[(0,t.jsx)(a.Input,{"aria-labelledby":"Passkey name",disabled:f,onChange:e=>O(e.target.value),placeholder:"Passkey name",ref:L,required:!0,value:N,width:"70%"}),(0,t.jsx)(r.Spacer,{y:4.5})]}):null]})]}),(0,t.jsxs)(i.Modal.Actions,{children:[(0,t.jsx)(i.Modal.Action,{onClick:()=>p(),type:"secondary",children:g?"Close":"Cancel"}),g?(0,t.jsx)(i.Modal.Action,{loading:f,onClick:()=>D(),children:"Save"}):(0,t.jsx)(i.Modal.Action,{loading:f,onClick:()=>H(),children:f?"Awaiting browser inputâ€¦":S?"Retry":"Continue"})]})]})}),(0,t.jsx)(y,{active:E,onCancel:()=>{B(!1),U(null)},onSuccess:async()=>{B(!1),U(null),"passkey-name"===F?await D():"passkey-register"===F&&await H()}})]})}],8790775)},4347859,7674054,2872043,394435,e=>{"use strict";var t=e.i(7292788),s=e.i(8583659),a=e.i(2504781),i=e.i(2064047),r=e.i(6891161),o=e.i(9318197),l=e.i(455575),n=e.i(277234),d=e.i(4244280),c=e.i(6318858),u=e.i(1201436),h=e.i(3993360),x=e.i(545405),p=e.i(9125947);function f(e){let{active:i,isLastStep:o,recoveryCodes:l,onClose:n}=e,[d,f]=(0,s.useTransition)(),[y,j]=(0,s.useTransition)(),m=(0,s.useRef)(null);return(0,t.jsxs)(r.Modal.Modal,{active:i,onClickOutside:()=>n(),children:[(0,t.jsx)(r.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial tailwind",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)(r.Modal.Title,{children:"Recovery Codes"}),(0,t.jsx)("p",{className:"text-copy-14 pb-2 pt-6",children:"Copy and store these recovery code in case you lose your device."})]}),(0,t.jsxs)("div",{className:"border-red-50 group relative rounded-lg border bg-background-200",children:[(0,t.jsx)("div",{className:"flex w-full overflow-x-auto md:overflow-visible",children:(0,t.jsx)("div",{className:"grid w-full grid-cols-2 grid-rows-3 gap-6 px-6 py-3 font-mono",children:l.map(e=>(0,t.jsx)("div",{className:"text-center",children:e},e))})}),(0,t.jsxs)("div",{className:"relative flex items-center justify-end gap-2 rounded-b-lg border-t border-gray-400 bg-white p-3",ref:m,children:[(0,t.jsx)(a.Button,{onClick:()=>{j(()=>{let e=new Blob([l.join("\n")],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(e),s=document.createElement("a");s.download="recovery-codes.txt",s.href=t,m.current?.appendChild(s),s.click(),m.current?.removeChild(s),URL.revokeObjectURL(t)})},prefix:y?(0,t.jsx)(c.Check,{}):(0,t.jsx)(h.Download,{}),size:"small",tabIndex:-1,type:"tertiary",children:"Download"}),(0,t.jsx)(a.Button,{onClick:()=>f(async()=>{(0,x.copyToClipboard)(l.join("\n")),await (0,p.default)(500)}),prefix:d?(0,t.jsx)(c.Check,{}):(0,t.jsx)(u.Copy,{}),size:"small",tabIndex:-1,type:"tertiary",children:"Copy"})]})]})]})}),(0,t.jsx)(r.Modal.Actions,{className:"flex justify-end",children:(0,t.jsx)(r.Modal.Action,{onClick:n,children:o?"Done":"Continue"})})]})}e.s(["RecoveryCodesModal",0,f],7674054),e.s(["TwoFactorModal",0,function(e){let{active:c,hasPasskeys:u,isRequestingTotpSecret:h=!1,totpSessionId:x,setPasskeyModalActive:p,setTotpSetupModalActive:y,onCancel:j,onClose:m,onEnable:g}=e,[C,v]=(0,s.useState)(!1),[w,_]=(0,s.useState)([]),k=(0,l.useToasts)(),b=async()=>{v(!0);let e=await (0,n.fetchAPI)(d.API_USER_MFA_CONFIGURATION,{method:"POST",headers:{"Content-Type":"application/json"},body:{enabled:!0,...x?{totpId:x}:{}}});"recoveryCodes"in e?(_(e.recoveryCodes),await g(),k.success("Two-factor authentication enabled.")):k.error(e.message),v(!1)};return w.length>0?(0,t.jsx)(f,{active:!0,isLastStep:!0,onClose:()=>{_([]),m()},recoveryCodes:w}):(0,t.jsxs)(r.Modal.Modal,{active:c,onAnimationDone:()=>{v(!1)},onClickOutside:()=>{x||j()},children:[(0,t.jsxs)(r.Modal.Body,{children:[(0,t.jsx)(r.Modal.Title,{children:"Enable Two-factor Authentication"}),(0,t.jsx)(o.Spacer,{}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14",children:"Once two-factor is enabled you will have to provide two methods of authentication in order to sign in into your account."}),u||x?null:(0,t.jsx)("p",{className:"text-copy-14",children:"In order to enable two-factor authentication you must configure at least one of the following methods."})]}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,t.jsxs)(i.Entity.List,{className:"shadow-border",children:[(0,t.jsx)(i.Entity,{children:(0,t.jsxs)("div",{className:"space-between flex w-full items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex grow flex-col",children:[(0,t.jsx)("h4",{className:"text-heading-14",children:"Authenticator App (TOTP)"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Use a time-based authentication code from an authenticator app."})]}),(0,t.jsx)(a.Button,{className:"min-w-28",disabled:!!x,loading:h,onClick:y,children:"Setup"})]})}),(0,t.jsx)(i.Entity,{children:(0,t.jsxs)("div",{className:"space-between flex w-full items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex grow flex-col",children:[(0,t.jsx)("h4",{className:"text-heading-14",children:"Passkey"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:u?"Your account already has passkeys associated, no need to attach a new one":"Add a new passkey"})]}),(0,t.jsxs)(a.Button,{className:"min-w-28",onClick:()=>p(),tabIndex:u?-1:0,type:u?"secondary":"default",children:["Add",u?" more":""]})]})})]})})]})]}),(0,t.jsxs)(r.Modal.Actions,{children:[(0,t.jsx)(r.Modal.Action,{onClick:()=>j(),tabIndex:-1,type:"secondary",children:"Cancel"}),(0,t.jsx)(r.Modal.Action,{disabled:!u&&!x,loading:C,onClick:b,children:"Enable"})]})]})}],4347859),e.s(["TwoFactorDisableModal",0,function(e){let{active:a,onCancel:i,onConfirm:o}=e,[l,n]=(0,s.useTransition)();return(0,t.jsxs)(r.Modal.Modal,{active:a,disableFocusTrap:!a,onClickOutside:()=>i(),children:[(0,t.jsx)(r.Modal.Body,{children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)(r.Modal.Title,{children:"Disable Two-factor Authentication"}),(0,t.jsx)("p",{className:"text-copy-14 pb-2 pt-6",children:"Are you sure you want to disable two-factor authentication? Your one-time code via authenticator app (TOTP) will cease to work and your recovery codes will be invalidated."})]})})}),(0,t.jsxs)(r.Modal.Actions,{children:[(0,t.jsx)(r.Modal.Action,{disabled:l,onClick:i,type:"default",children:"Close"}),(0,t.jsx)(r.Modal.Action,{loading:l,onClick:()=>n(async()=>{await o()}),type:"secondary",children:"Confirm"})]})]})}],2872043);var y=e.i(9571736),j=e.i(5140444),m=e.i(4327985),g=e.i(5223937),C=e.i(9948865),v=e.i(3058947);e.s(["TotpSetupModal",0,function(e){let{active:i,secret:o,totpSessionId:h,onCancel:x,onConfirm:p}=e,{user:f}=(0,j.useUser)(),w=(0,s.useRef)(null),_=(0,s.useRef)(null),[k,b]=(0,s.useState)(!1),[A,M]=(0,s.useState)(!1),[S,T]=(0,s.useState)(!1),[N,O]=(0,s.useTransition)();return(0,s.useEffect)(()=>{let e=setTimeout(()=>{b(!1)},1e3);return()=>clearTimeout(e)},[k]),i||(S&&T(!1),A&&M(!1),w.current?.reset()),(0,t.jsxs)(r.Modal.Modal,{active:i,onClickOutside:x,onEnterKeyPress:()=>{S&&p()},children:[(0,t.jsx)(r.Modal.Body,{className:"pb-0",children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)(r.Modal.Title,{children:"Enable Authenticator App"}),(0,t.jsx)("p",{className:"text-copy-14 py-6",children:"Scan the QR code below with your preferred authenticator app. Then, enter the 6 digit code that the app provides to continue. You can also copy the secret below and paste it into your app."}),(0,t.jsxs)(g.Material,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-2",children:[(0,t.jsx)("p",{className:"text-copy-14-mono",children:o}),(0,t.jsx)(a.Button,{"aria-label":"Copy totp secret",onClick:()=>{navigator.clipboard.writeText(o),b(!0)},shape:"square",size:"tiny",svgOnly:!0,tabIndex:-1,type:"tertiary",children:k?(0,t.jsx)(c.Check,{}):(0,t.jsx)(u.Copy,{})})]}),(0,t.jsx)("div",{className:"flex justify-center p-4",children:(0,t.jsx)(g.Material,{className:"p-4 dark:bg-[var(--ds-gray-1000)]",children:(0,t.jsx)(v.QRCode,{color:"#000000",data:`otpauth://totp/Vercel:${f?.email??""}?issuer=Vercel&secret=${o}&algorithm=SHA1&digits=6&period=30`,image:`${C.favIconFolder}/favicon.ico`,size:208})})})]})]})})}),(0,t.jsx)(y.OTPInput,{"aria-label":"Enter the 6 digit code from your authenticator app",autoFocus:!0,containerClassName:[m.geistMonoFont.className,"py-6 group flex gap-2 justify-center items-center"].join(" "),"data-1p-ignore":!0,"data-lpignore":!0,disabled:N||S,maxLength:6,name:"digits",onChange:()=>{T(!1),M(!1)},onComplete:e=>{O(async()=>{try{let{verified:t}=await (0,n.fetchAPI)(`${d.API_USER_MFA_CONFIGURATION}/totp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:"verify",digits:e,totpId:h}),throwOnHTTPError:!0});if(!t){T(!1),M(!0),_.current?.focus();return}T(!0)}catch(e){l.toasts.error(e.message)}})},pasteTransformer:e=>e.trim(),pushPasswordManagerStrategy:"none",render:e=>{let{slots:s}=e;return s.map((e,s)=>(0,t.jsxs)("div",{className:["relative h-12 w-12","text-lg text-gray-700",`rounded-sm border border-solid ${A?"border-red-900 ":"border-gray-200"}`,"flex items-center justify-center dark:bg-[#0A0A0A]",e.isActive?"border-gray-700":""].filter(Boolean).join(" "),children:[e.hasFakeCaret?(0,t.jsx)("span",{className:"animate-caret-blink",children:"|"}):null," ",e.char]},s))}}),(0,t.jsxs)(r.Modal.Actions,{children:[(0,t.jsx)(r.Modal.Action,{onClick:x,type:"secondary",children:"Close"}),(0,t.jsx)(r.Modal.Action,{disabled:N||!S,onClick:p,children:"Confirm"})]})]})}],394435)},2461815,e=>{"use strict";var t=e.i(7292788),s=e.i(8583659),a=e.i(2504781),i=e.i(455575),r=e.i(4244280),o=e.i(277234),l=e.i(5338940),n=e.i(134877),d=e.i(3917477),c=e.i(4347859),u=e.i(2872043),h=e.i(394435),x=e.i(7674054),p=e.i(8790775),f=e.i(2551420),y=e.i(2064047),j=e.i(6891161),m=e.i(8522580);function g(e){let{active:s,hasPasskeys:i,hasTotp:r,isRequestingTotpSecret:o,onClose:l,setTotpSetupModalActive:n,setPasskeyModalActive:d,totpSessionId:c}=e;return(0,t.jsxs)(j.Modal.Modal,{active:s,onClickOutside:()=>l(),children:[(0,t.jsx)(j.Modal.Body,{children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)(j.Modal.Title,{className:"pb-6",children:"Two-factor Authentication Enabled"}),(0,t.jsx)(m.Note,{fill:!0,type:"success",children:"Two-factor authentication enabled."}),(0,t.jsx)("p",{className:"text-copy-14 py-6",children:"Configure additional authentication methods to help you gain access across your account in case you lose your device."}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,t.jsxs)(y.Entity.List,{className:"shadow-border",children:[r?null:(0,t.jsx)(y.Entity,{children:(0,t.jsxs)("div",{className:"space-between flex w-full items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex grow flex-col",children:[(0,t.jsx)("h4",{className:"text-heading-14",children:"Authenticator App (TOTP)"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Use a time-based one time code as second factor."})]}),(0,t.jsx)(a.Button,{disabled:!!c,loading:o,onClick:n,type:"secondary",size:"small",children:"Setup"})]})}),i?null:(0,t.jsx)(y.Entity,{children:(0,t.jsxs)("div",{className:"space-between flex w-full items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex grow flex-col",children:[(0,t.jsx)("h4",{className:"text-heading-14",children:"Passkey"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Log in with fingerprint, face scan, device password, or pin."})]}),(0,t.jsx)(a.Button,{onClick:()=>d(),tabIndex:-1,type:"secondary",size:"small",children:"Add"})]})})]})})]})})}),(0,t.jsx)(j.Modal.Actions,{className:"flex justify-end",children:(0,t.jsx)(j.Modal.Action,{onClick:()=>l(),children:"Done"})})]})}var C=e.i(8517043),v=e.i(7137884),w=e.i(1906681),_=e.i(5468328),k=e.i(9358876);function b(e){let{teams:s,canUpdateUser:i,isDisableMfaPending:r,isMfaEnabled:o,isTotpSecretPending:l,hasTotp:n,onToggleChange:d,onSetupTotp:c,onRegenerateRecoveryCodes:u}=e,h=s?.filter(e=>e.mfa?.enforced).map(e=>e.slug)??[],x=!h.length;return(0,t.jsx)(C.Fieldset,{children:(0,t.jsxs)(v.FieldsetContent,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-heading-20 pb-2",id:"two-factor-authentication",children:"Two-factor Authentication"}),(0,t.jsx)("p",{className:"text-copy-14",children:"Add an additional layer of security by requiring at least two methods of authentication to sign in."})]}),(0,t.jsx)(_.Tooltip,{disableTriggers:!o||x,text:`You are part of one or more teams that require 2FA. Disable 2FA enforcement or leave the teams to continue. ${(0,k.pluralize)("Team",h.length)}: ${h.join(", ")}`,children:(0,t.jsx)(w.Toggle,{"aria-label":"Enable two factor authentication",checked:o,disabled:o&&!x||!i||r,onChange:d,size:"large"})})]}),(0,t.jsxs)("div",{className:"pt-4",children:[(0,t.jsxs)(y.Entity.List,{className:"shadow-border",children:[(0,t.jsx)(y.Entity,{children:(0,t.jsxs)("div",{className:"space-between flex w-full items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex grow flex-col",children:[(0,t.jsx)("h4",{className:"text-heading-14",children:"Authenticator App (TOTP)"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Generate codes using an app like Google Authenticator or Okta Verify."})]}),(0,t.jsx)(a.Button,{disabled:!o||!i,loading:l,onClick:c,size:"small",type:n?"secondary":"default",children:n?"Edit":"Add"})]})}),(0,t.jsx)(y.Entity,{children:(0,t.jsx)("div",{className:"space-between flex w-full items-center gap-2",children:(0,t.jsxs)("div",{className:"flex grow flex-col",children:[(0,t.jsx)("h4",{className:"text-heading-14",children:"Passkeys"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"You can use the same passkeys you use for login as a second factor of authentication."})]})})})]}),(0,t.jsx)("div",{className:"pt-6",children:(0,t.jsx)(y.Entity.List,{className:"shadow-border",children:(0,t.jsx)(y.Entity,{children:(0,t.jsxs)("div",{className:"space-between flex w-full items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex grow flex-col",children:[(0,t.jsx)("h4",{className:"text-heading-14",children:"Recovery Codes"}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Security codes when you cannot access any of your other two-factor methods."})]}),(0,t.jsx)(a.Button,{className:"min-w-28",disabled:!o||!i,onClick:()=>void u(),size:"small",type:"secondary",children:"Regenerate"})]})})})})]})]})})}e.s(["MultiFactor",0,function(e){let{canUpdateUser:y,hasTotp:j,isMfaEnabled:m,mutateUser:C,type:v,onActivate:w,onModalOpen:_}=e,k=(0,i.useToasts)(),{teams:A,mutate:M}=(0,l.useTeam)(),{data:S,mutate:T}=(0,d.usePasskeys)(),N=!!S?.passkeys&&S.passkeys.length>0,[O,P]=(0,s.useTransition)(),[I,R]=(0,s.useState)(null),[L,E]=(0,s.useState)(null),[B,F]=(0,s.useTransition)(),[U,D]=(0,s.useState)(!1),[H,G]=(0,s.useState)(!1),[V,Z]=(0,s.useState)(!1),[Y,$]=(0,s.useState)(!1),[W,q]=(0,s.useState)(!1),[z,Q]=(0,s.useState)(!1),[J,K]=(0,s.useState)(null),[X,ee]=(0,s.useState)([]),[et,es]=(0,s.useState)(!1),[ea,ei]=(0,s.useState)(null);async function er(){try{let e=await (0,o.fetchAPI)(r.API_USER_MFA_CONFIGURATION,{method:"PATCH",headers:{"Content-Type":"application/json"},throwOnHTTPError:!0});ei(null),es(!1),ee(e.recoveryCodes),$(!0),k.success("Recovery codes regenerated.")}catch(e){if((0,n.isAPIError)(e)&&"challenge_required"===e.code){es(!0),ei("recovery-code");return}k.error((0,n.isAPIError)(e)?e.message:"Failed to regenerate recovery codes.")}}function eo(){let{isTwoFactorSetup:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};F(async()=>{try{let{secret:t,totpId:s}=await (0,o.fetchAPI)(`${r.API_USER_MFA_CONFIGURATION}/totp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:"initialize"}),throwOnHTTPError:!0});e&&(K("recovery-code"),G(!1)),R(t),E(s),ei(null),es(!1),Q(!1),D(!0)}catch(e){if((0,n.isAPIError)(e)&&"challenge_required"===e.code){es(!0),ei("totp");return}k.error((0,n.isAPIError)(e)?e.message:"Failed to request TOTP secret.")}})}async function el(){let e=await (0,o.fetchAPI)(r.API_USER_MFA_CONFIGURATION,{method:"POST",headers:{"Content-Type":"application/json"},body:{enabled:!0,...L?{totpId:L}:{}}});if("recoveryCodes"in e){ee(e.recoveryCodes);let[t]=await Promise.all([C(),M()]);N&&t?.user?.mfa?.hasTotp?(K(null),k.success("Two-factor authentication enabled.")):K("mfa-enabled"),$(!0)}else k.error(e.message)}async function en(){try{await (0,o.fetchAPI)(r.API_USER_MFA_CONFIGURATION,{method:"POST",headers:{"Content-Type":"application/json"},body:{enabled:!1},throwOnHTTPError:!0}),await Promise.all([C(),M()]),q(!1),es(!1),ei(null)}catch(e){if((0,n.isAPIError)(e)&&"challenge_required"===e.code){es(!0),ei("disable-mfa");return}k.error((0,n.isAPIError)(e)?e.message:"Failed to disable two-factor authentication.")}}return(0,t.jsxs)(t.Fragment,{children:["button"===v?(0,t.jsx)(a.Button,{className:"w-full",size:"medium",loading:m||U||H||V||Y||W||z||et,onClick:()=>{G(!0),_?.()},children:"Enable Two-Factor Authentication"}):(0,t.jsx)(b,{canUpdateUser:y,isMfaEnabled:m,teams:A,isDisableMfaPending:O,isTotpSecretPending:B,hasTotp:j,onRegenerateRecoveryCodes:er,onToggleChange:()=>P(()=>{m?q(!0):G(!0)}),onSetupTotp:()=>{R(null),E(null),eo()}}),(0,t.jsx)(p.PasskeyModal,{active:V,onCancel:()=>{Z(!1),"recovery-code"===J&&(G(!0),K(null))},onCreate:()=>{(0,s.startTransition)(async()=>{await T()})},onUpdate:async()=>{await T(),"recovery-code"===J&&(await el(),$(!0),K("mfa-enabled")),Z(!1)}}),(0,t.jsx)(f.TwoFactorChallengeModal,{active:et,onCancel:()=>{es(!1),ei(null)},onSuccess:async()=>{"totp"===ea?eo():"recovery-code"===ea?await er():"disable-mfa"===ea&&await en()}}),(0,t.jsx)(c.TwoFactorModal,{active:H,hasPasskeys:N,isRequestingTotpSecret:B,onCancel:()=>{G(!1),K(null),R(null),E(null)},onClose:()=>{G(!1),E(null),w?.()},onEnable:async()=>{await C(),E(null)},setPasskeyModalActive:()=>{Z(!0),K("recovery-code"),G(!1)},setTotpSetupModalActive:()=>{R(null),E(null),eo({isTwoFactorSetup:!0})},totpSessionId:L}),(0,t.jsx)(u.TwoFactorDisableModal,{active:!!(W&&!et),onCancel:()=>{q(!1)},onConfirm:async()=>{await en()}}),(0,t.jsx)(g,{active:!!(z&&!et),hasPasskeys:N,hasTotp:j,isRequestingTotpSecret:B,onClose:()=>{Q(!1)},setPasskeyModalActive:()=>{Q(!1),Z(!0),K(null)},setTotpSetupModalActive:()=>{R(null),E(null),eo(),K(null)},totpSessionId:L}),(0,t.jsx)(h.TotpSetupModal,{active:U,onCancel:()=>{D(!1),R(null),E(null),"recovery-code"===J&&(G(!0),K(null))},onConfirm:async()=>{"recovery-code"===J?await el():(await C(),K(null),k.success("Authenticator app secret updated.")),D(!1),R(null),E(null)},secret:I??"",totpSessionId:L??""}),(0,t.jsx)(x.RecoveryCodesModal,{active:!!(Y&&!et),isLastStep:!!(N&&j),onClose:()=>{$(!1),"mfa-enabled"!==J||N&&j||(Q(!0),K(null)),w?.()},recoveryCodes:X})]})}],2461815)}]);

//# debugId=d5839ac2-9e60-e34f-b927-d8382bdf5176
//# sourceMappingURL=eb22e4a87854e253.js.map